<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CleanCity – Citizen Profile</title>

  <style>
    /* -------------------- RESET / BASE -------------------- */
    * { box-sizing: border-box; }
    :root{
      
      --ink:#222;
      --muted:#64748b;
      --card:#ffffff;
      --bg:#f1f5f9;
      --ring:rgba(10,123,78,.25);
      --shadow: 0 10px 30px rgba(0,0,0,.12);
      --radius:18px;
    }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: "Segoe UI", system-ui, -apple-system, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:#E3C39D;
      display:flex;
      flex-direction:column;
    }
    a{ color:inherit; text-decoration:none; }

    /* -------------------- BANNER -------------------- */
    .cc-banner{
      position:relative;
      height:70vh;
      min-height:550px;
      background:url("./profile1.jpg") center/cover no-repeat;
      overflow:hidden;
    }
    .cc-banner::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(to bottom, rgba(181, 174, 174, 0) 55%, rgba(0,0,0,.28) 100%);
      pointer-events:none;
    }

    /* -------------------- NAVBAR -------------------- */
    .cc-navbar{
      position:absolute; top:0; left:0; right:0;
      display:flex; align-items:center; justify-content:space-between;
      padding:16px 28px;
      z-index:3;
      background-color: #0e2252;
    }
    .cc-navbar .brand{
      display:flex; align-items:center; gap:8px; color:#c1c5c2;
      font-weight:700; font-size: 1.2rem;letter-spacing:.3px;
      text-shadow:0 2px 6px rgba(248, 237, 237, 0.35);
    }
    
    .cc-navbar .brand img{ height:40px; width:40px; object-fit:contain; }
    .cc-navlinks a{
      color:#e2e2e2; font-weight:500; margin-left:30px;
      padding:8px 10px; border-radius:10px;font-size: 1.1rem;gap: .25rem;
      transition:.2s ease;
    }
    .cc-navlinks a:hover{ background:rgba(255,255,255,.14); }
.cc-nav a.active {
  color: #fff;
  background: #444;   /* highlight background */
  border-radius: 6px;
  padding: 8px 14px;
  font-weight: 600;
}


    /* -------------------- MAIN CONTAINER -------------------- */
    .cc-wrap{
      width:min(1200px, 92%);
      margin:-88px auto 32px;
      position:relative;
      z-index:5;
    }

    /* -------------------- GRID -------------------- */
    .cc-grid{
      display:grid; gap:24px;
      grid-template-columns: 1fr 2fr;
    }

    /* -------------------- CARD -------------------- */
    .cc-card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:22px;
      background-color:rgba(212, 207, 198, 0.593);
    }

    .cc-card.headlined{
      padding-top:0;
      overflow:hidden;
    }
    .cc-card .cap{
      background:#e6e8eb00;
      color:#110606;
      font-weight:700;
      text-align:center;
      padding:14px 14px;
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
      letter-spacing:.3px;
    }
    .cc-card .body{ padding:20px; }

    /* -------------------- LEFT PROFILE -------------------- */
    .cc-user{text-align:center;}
    .cc-avatar{
      width:112px; height:112px; object-fit:cover; border-radius:50%;
      display:block; margin:10px auto 14px;
      border:4px solid #fff; box-shadow:0 6px 14px rgba(0,0,0,.15);
    }
    .cc-name{ font-size:1.25rem; font-weight:700; margin:.25rem 0 .15rem; }
    .cc-role{ color:var(--muted); margin-bottom:14px; }
    .cc-sep{ border:0; border-top:1px solid #e5e7eb; margin:16px 0; }
    .cc-stats{ list-style:none; padding:0; margin:0 0 16px; text-align:left; }
    .cc-stats li{ display:flex; justify-content:space-between; padding:6px 2px; }
    .cc-btn{
      display:inline-block; width:100%;
      padding:10px 12px; border-radius:12px;
      border:1px solid #cbd5e1; background:#f8fafc; font-weight:600;
      transition:.15s ease; cursor:pointer; text-align:center;
    }
    .cc-btn:hover{ background:#eef2f7; }

    /* -------------------- FORM -------------------- */
    .cc-formgrid{ display:grid; gap:14px; grid-template-columns:1fr 1fr; }
    .cc-field{ display:flex; flex-direction:column; gap:6px; }
    .cc-label{ font-weight:600; color:#475569; }
    .cc-input{
      border:1px solid #cbd5e1; border-radius:12px;
      padding:12px 14px; font:inherit; outline:none; background:#fff;
      transition:.15s ease;
    }
    .cc-input:focus{ border-color:var(--brand); box-shadow:0 0 0 4px var(--ring); }
    .cc-actions{ grid-column:1 / -1; display:flex; justify-content:flex-end; }
    .cc-primary{
      background:var(--brand); color:#fff; border:none;
      padding:10px 16px; border-radius:12px; font-weight:700; cursor:pointer;
      transition:.15s ease;
    }
    .cc-primary:hover{ background:#475569; }

    /* -------------------- BOTTOM CARDS -------------------- */
    .cc-bottom{
      margin-top:26px;
      display:grid; gap:24px;
      grid-template-columns: 1fr 1fr 1fr;
    }
    .cc-bottom h4{ margin:0 0 10px; font-size:1.05rem; }
    .cc-chipbtn{
      display:inline-block; padding:10px 14px; border-radius:12px;
      background:#f1f5f9; border:1px solid #cbd5e1; font-weight:600; cursor:pointer;
    }
    .cc-activities{ margin:0; padding-left:18px; }
    .cc-activities li{ margin:6px 0; }

    /* -------------------- FOOTER -------------------- */
    footer{
      margin-top:auto;
      background:#071739; color:#fff;
    }
    .footwrap{
      width:min(1200px, 92%); margin:0 auto; padding:28px 0;
      display:grid; gap:24px; grid-template-columns: 2fr 1fr 1fr;
    }
    footer h4{ margin:.2rem 0 .6rem; }
    footer ul{ list-style:none; padding:0; margin:0; }
    footer li{ margin:6px 0; }
    footer a{ color:#fff; text-decoration:none; }
    footer a:hover{ text-decoration:underline; }

    /* -------------------- RESPONSIVE -------------------- */
    @media (max-width: 960px){
      .cc-grid{ grid-template-columns: 1fr; }
      .cc-bottom{ grid-template-columns: 1fr; }
      .cc-wrap{ margin-top:-70px; }
    }
  </style>
</head>

<body>
  <!-- Banner -->
  <div class="cc-banner">
    <div class="cc-navbar">
      <div class="brand">
        <img src="./logo1.jpg" alt="CleanCity logo">
        <span>CleanCity</span>
      </div>
      <nav class="cc-navlinks">
        <a href="index.html">Home</a>
        <a href="./citizen-profile.html"class="nav-link active">Profile</a>
        <a href="./report.html">Report</a>
        <a href="./citizen-dashboard.html">Dashboard</a>
        <a href="./map.html">Map</a>
        <a href="./logout.html" id="logoutBtn">Logout</a>
      </nav>
    </div>
  </div>

  <main class="cc-wrap">
    <section class="cc-grid">
      <aside class="cc-card cc-user">
        <img class="cc-avatar" src="./assets/img/profile.jpg" alt="Profile picture" id="avatar">
        <div class="cc-name" id="displayName">User Name</div>
        <div class="cc-role">Citizen, CleanCity</div>
        <hr class="cc-sep">
        <ul class="cc-stats">
          <li><span>Reports Submitted</span><strong id="statSubmitted">0</strong></li>
          <li><span>Resolved</span><strong id="statResolved">0</strong></li>
          <li><span>Pending</span><strong id="statPending">0</strong></li>
        </ul>
        <a class="cc-btn" href="#">View Public Profile</a>
      </aside>

      <section class="cc-card headlined">
        <div class="cap">Account Settings</div>
        <div class="body">
          <form id="profileForm" class="cc-formgrid" autocomplete="off">
            <div class="cc-field">
              <label class="cc-label" for="first">First Name</label>
              <input id="first" name="first" class="cc-input" type="text" />
            </div>
            <div class="cc-field">
              <label class="cc-label" for="last">Last Name</label>
              <input id="last" name="last" class="cc-input" type="text" />
            </div>
            <div class="cc-field">
              <label class="cc-label" for="email">Email</label>
              <input id="email" name="email" class="cc-input" type="email" />
            </div>
            <div class="cc-field">
              <label class="cc-label" for="phone">Phone</label>
              <input id="phone" name="phone" class="cc-input" type="text" />
            </div>
            <div class="cc-field">
              <label class="cc-label" for="city">City</label>
              <input id="city" name="city" class="cc-input" type="text" />
            </div>
            <div class="cc-field">
              <label class="cc-label" for="country">Country</label>
              <input id="country" name="country" class="cc-input" type="text" />
            </div>
            <div class="cc-actions">
              <button type="submit" class="cc-primary">Update</button>
            </div>
          </form>
        </div>
      </section>
    </section>

    <section class="cc-bottom">
      <div class="cc-card">
        <h4>Recent Activities</h4>
        <ul id="activityList" class="cc-activities"></ul>
      </div>

      <div class="cc-card">
        <h4>Privacy</h4>
        <p>Manage your data sharing preferences and visibility settings.</p>
        <button class="cc-chipbtn" type="button" id="btnPrivacy">Privacy Settings</button>
      </div>

      <div class="cc-card">
        <h4>Account Settings</h4>
        <p>Change password, update login preferences, or delete account.</p>
        <button class="cc-chipbtn" type="button" id="btnManage">Manage Account</button>
      </div>
    </section>
  </main>

  <footer>
    <div class="footwrap">
      <div>
        <h4>About CleanCity</h4>
        <p>Citizen-powered platform to report, track, and resolve waste issues.</p>
      </div>
      <div>
        <h4>Quick Links</h4>
        <ul>
          <li><a href="./index.html">Home</a></li>
          <li><a href="./public-feed.html">public-feed</a></li>
          <li><a href="./map.html">Map</a></li>
        </ul>
      </div>
      <div>
        <h4>Contact</h4>
        <ul>
          <li>Email: support@cleancity.org</li>
          <li>Phone: +880-123-456-789</li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
    const LS_PROFILE = "profileData";
    const LS_ACTIVITY = "activityLog";

    const form = document.getElementById("profileForm");
    const displayName = document.getElementById("displayName");
    const activityList = document.getElementById("activityList");

    // redirect if not logged in
    const user = JSON.parse(localStorage.getItem("currentUser"));
    if(!user || user.role !== "citizen") window.location.href = "index.html";

    // prefill profile form
    if(user.name){
      const names = user.name.split(" ");
      form.first.value = names[0] || "";
      form.last.value = names.slice(1).join(" ") || "";
      displayName.textContent = user.name;
    }
    form.email.value = user.email || "";

    // load profile
    function loadProfile(){
      const data = JSON.parse(localStorage.getItem(LS_PROFILE)) || {};
      form.phone.value = data.phone || "";
      form.city.value = data.city || "";
      form.country.value = data.country || "";
    }

    function saveProfile(){
      const data = {
        first: form.first.value.trim(),
        last: form.last.value.trim(),
        email: form.email.value.trim(),
        phone: form.phone.value.trim(),
        city: form.city.value.trim(),
        country: form.country.value.trim()
      };
      localStorage.setItem(LS_PROFILE, JSON.stringify(data));
      displayName.textContent = data.first + " " + data.last;
      pushActivity("Updated profile");
    }

    function renderActivities(items){
      activityList.innerHTML = "";
      items.forEach(txt => {
        const li = document.createElement("li");
        li.textContent = "• " + txt;
        activityList.appendChild(li);
      });
    }

    function loadActivities(){
      const defaults = [
        "Reported waste issue at Central Park.",
        "Updated phone number.",
        "Upvoted community cleanup event."
      ];
      const acts = JSON.parse(localStorage.getItem(LS_ACTIVITY)) || defaults;
      renderActivities(acts);
    }

    function pushActivity(text){
      const arr = JSON.parse(localStorage.getItem(LS_ACTIVITY)) || [];
      arr.unshift(`${text} (${new Date().toLocaleString()})`);
      localStorage.setItem(LS_ACTIVITY, JSON.stringify(arr.slice(0,20)));
      renderActivities(arr.slice(0,20));
    }

    // event listeners
    form.addEventListener("submit", (e)=>{
      e.preventDefault();
      saveProfile();
      const btn = e.submitter || form.querySelector(".cc-primary");
      const prev = btn.textContent;
      btn.textContent = "Saved ✓";
      setTimeout(()=> btn.textContent = prev, 1200);
    });

    document.getElementById("btnPrivacy").addEventListener("click", ()=> {
      pushActivity("Visited Privacy Settings");
      alert("Privacy Settings: (demo)");
    });
    document.getElementById("btnManage").addEventListener("click", ()=> {
      pushActivity("Opened Manage Account");
      alert("Manage Account: (demo)");
    });

    // logout
    document.getElementById("logoutBtn").addEventListener("click", ()=> {
      localStorage.removeItem("currentUser");
    });

    loadProfile();
    loadActivities();
    
// Auto highlight active page in top navbar
document.addEventListener("DOMContentLoaded", function() {
  const currentPage = window.location.pathname.split("/").pop() || "index.html";

  document.querySelectorAll(".nav a").forEach(link => {
    // get the filename part only (ignore #hash or query ?x=y)
    const linkPage = link.getAttribute("href").split("/").pop();

    if (linkPage === currentPage) {
      link.classList.add("active");
    }
  });
});


  </script>
</body>
</html>
